
func int b_ironmob_bestimmung()
{
	if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_01") && (IRONMOB_01_AMOUNT_MAX > IRONMOB_01_AMOUNT))
	{
		IRONMOB_01_AMOUNT = IRONMOB_01_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_02") && (IRONMOB_02_AMOUNT_MAX > IRONMOB_02_AMOUNT))
	{
		IRONMOB_02_AMOUNT = IRONMOB_02_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_03") && (IRONMOB_03_AMOUNT_MAX > IRONMOB_03_AMOUNT))
	{
		IRONMOB_03_AMOUNT = IRONMOB_03_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_04") && (IRONMOB_04_AMOUNT_MAX > IRONMOB_04_AMOUNT))
	{
		IRONMOB_04_AMOUNT = IRONMOB_04_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_05") && (IRONMOB_05_AMOUNT_MAX > IRONMOB_05_AMOUNT))
	{
		IRONMOB_05_AMOUNT = IRONMOB_05_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_06") && (IRONMOB_06_AMOUNT_MAX > IRONMOB_06_AMOUNT))
	{
		IRONMOB_06_AMOUNT = IRONMOB_06_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_07") && (IRONMOB_07_AMOUNT_MAX > IRONMOB_07_AMOUNT))
	{
		IRONMOB_07_AMOUNT = IRONMOB_07_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_08") && (IRONMOB_08_AMOUNT_MAX > IRONMOB_08_AMOUNT))
	{
		IRONMOB_08_AMOUNT = IRONMOB_08_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_09") && (IRONMOB_09_AMOUNT_MAX > IRONMOB_09_AMOUNT))
	{
		IRONMOB_09_AMOUNT = IRONMOB_09_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_10") && (IRONMOB_10_AMOUNT_MAX > IRONMOB_10_AMOUNT))
	{
		IRONMOB_10_AMOUNT = IRONMOB_10_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_11") && (IRONMOB_11_AMOUNT_MAX > IRONMOB_11_AMOUNT))
	{
		IRONMOB_11_AMOUNT = IRONMOB_11_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_12") && (IRONMOB_12_AMOUNT_MAX > IRONMOB_12_AMOUNT))
	{
		IRONMOB_12_AMOUNT = IRONMOB_12_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_13") && (IRONMOB_13_AMOUNT_MAX > IRONMOB_13_AMOUNT))
	{
		IRONMOB_13_AMOUNT = IRONMOB_13_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_14") && (IRONMOB_14_AMOUNT_MAX > IRONMOB_14_AMOUNT))
	{
		IRONMOB_14_AMOUNT = IRONMOB_14_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_15") && (IRONMOB_15_AMOUNT_MAX > IRONMOB_15_AMOUNT))
	{
		IRONMOB_15_AMOUNT = IRONMOB_15_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_16") && (IRONMOB_16_AMOUNT_MAX > IRONMOB_16_AMOUNT))
	{
		IRONMOB_16_AMOUNT = IRONMOB_16_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_17") && (IRONMOB_17_AMOUNT_MAX > IRONMOB_17_AMOUNT))
	{
		IRONMOB_17_AMOUNT = IRONMOB_17_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_18") && (IRONMOB_18_AMOUNT_MAX > IRONMOB_18_AMOUNT))
	{
		IRONMOB_18_AMOUNT = IRONMOB_18_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_19") && (IRONMOB_19_AMOUNT_MAX > IRONMOB_19_AMOUNT))
	{
		IRONMOB_19_AMOUNT = IRONMOB_19_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_20") && (IRONMOB_20_AMOUNT_MAX > IRONMOB_20_AMOUNT))
	{
		IRONMOB_20_AMOUNT = IRONMOB_20_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_21") && (IRONMOB_21_AMOUNT_MAX > IRONMOB_21_AMOUNT))
	{
		IRONMOB_21_AMOUNT = IRONMOB_21_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_22") && (IRONMOB_22_AMOUNT_MAX > IRONMOB_22_AMOUNT))
	{
		IRONMOB_22_AMOUNT = IRONMOB_22_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_23") && (IRONMOB_23_AMOUNT_MAX > IRONMOB_23_AMOUNT))
	{
		IRONMOB_23_AMOUNT = IRONMOB_23_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_24") && (IRONMOB_24_AMOUNT_MAX > IRONMOB_24_AMOUNT))
	{
		IRONMOB_24_AMOUNT = IRONMOB_24_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_25") && (IRONMOB_25_AMOUNT_MAX > IRONMOB_25_AMOUNT))
	{
		IRONMOB_25_AMOUNT = IRONMOB_25_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_26") && (IRONMOB_26_AMOUNT_MAX > IRONMOB_26_AMOUNT))
	{
		IRONMOB_26_AMOUNT = IRONMOB_26_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_27") && (IRONMOB_27_AMOUNT_MAX > IRONMOB_27_AMOUNT))
	{
		IRONMOB_27_AMOUNT = IRONMOB_27_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_28") && (IRONMOB_28_AMOUNT_MAX > IRONMOB_28_AMOUNT))
	{
		IRONMOB_28_AMOUNT = IRONMOB_28_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_29") && (IRONMOB_29_AMOUNT_MAX > IRONMOB_29_AMOUNT))
	{
		IRONMOB_29_AMOUNT = IRONMOB_29_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_30") && (IRONMOB_30_AMOUNT_MAX > IRONMOB_30_AMOUNT))
	{
		IRONMOB_30_AMOUNT = IRONMOB_30_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_31") && (IRONMOB_31_AMOUNT_MAX > IRONMOB_31_AMOUNT))
	{
		IRONMOB_31_AMOUNT = IRONMOB_31_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_32") && (IRONMOB_32_AMOUNT_MAX > IRONMOB_32_AMOUNT))
	{
		IRONMOB_32_AMOUNT = IRONMOB_32_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_33") && (IRONMOB_33_AMOUNT_MAX > IRONMOB_33_AMOUNT))
	{
		IRONMOB_33_AMOUNT = IRONMOB_33_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_34") && (IRONMOB_34_AMOUNT_MAX > IRONMOB_34_AMOUNT))
	{
		IRONMOB_34_AMOUNT = IRONMOB_34_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_35") && (IRONMOB_35_AMOUNT_MAX > IRONMOB_35_AMOUNT))
	{
		IRONMOB_35_AMOUNT = IRONMOB_35_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_01") && (IRONMOB_36_AMOUNT_MAX > IRONMOB_36_AMOUNT))
	{
		IRONMOB_36_AMOUNT = IRONMOB_36_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_02") && (IRONMOB_37_AMOUNT_MAX > IRONMOB_37_AMOUNT))
	{
		IRONMOB_37_AMOUNT = IRONMOB_37_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_03") && (IRONMOB_38_AMOUNT_MAX > IRONMOB_38_AMOUNT))
	{
		IRONMOB_38_AMOUNT = IRONMOB_38_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_04") && (IRONMOB_39_AMOUNT_MAX > IRONMOB_39_AMOUNT))
	{
		IRONMOB_39_AMOUNT = IRONMOB_39_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_05") && (IRONMOB_40_AMOUNT_MAX > IRONMOB_40_AMOUNT))
	{
		IRONMOB_40_AMOUNT = IRONMOB_40_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_06") && (IRONMOB_41_AMOUNT_MAX > IRONMOB_41_AMOUNT))
	{
		IRONMOB_41_AMOUNT = IRONMOB_41_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_07") && (IRONMOB_42_AMOUNT_MAX > IRONMOB_42_AMOUNT))
	{
		IRONMOB_42_AMOUNT = IRONMOB_42_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_08") && (IRONMOB_43_AMOUNT_MAX > IRONMOB_43_AMOUNT))
	{
		IRONMOB_43_AMOUNT = IRONMOB_43_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_09") && (IRONMOB_44_AMOUNT_MAX > IRONMOB_44_AMOUNT))
	{
		IRONMOB_44_AMOUNT = IRONMOB_44_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_10") && (IRONMOB_45_AMOUNT_MAX > IRONMOB_45_AMOUNT))
	{
		IRONMOB_45_AMOUNT = IRONMOB_45_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_10") && (IRONMOB_46_AMOUNT_MAX > IRONMOB_46_AMOUNT))
	{
		IRONMOB_46_AMOUNT = IRONMOB_46_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_12") && (IRONMOB_47_AMOUNT_MAX > IRONMOB_47_AMOUNT))
	{
		IRONMOB_47_AMOUNT = IRONMOB_47_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_13") && (IRONMOB_48_AMOUNT_MAX > IRONMOB_48_AMOUNT))
	{
		IRONMOB_48_AMOUNT = IRONMOB_48_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_14") && (IRONMOB_49_AMOUNT_MAX > IRONMOB_49_AMOUNT))
	{
		IRONMOB_49_AMOUNT = IRONMOB_49_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_15") && (IRONMOB_50_AMOUNT_MAX > IRONMOB_50_AMOUNT))
	{
		IRONMOB_50_AMOUNT = IRONMOB_50_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_16") && (IRONMOB_51_AMOUNT_MAX > IRONMOB_51_AMOUNT))
	{
		IRONMOB_51_AMOUNT = IRONMOB_51_AMOUNT + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_17") && (IRONMOB_52_AMOUNT_MAX > IRONMOB_52_AMOUNT))
	{
		IRONMOB_52_AMOUNT = IRONMOB_52_AMOUNT + 1;
		return TRUE;
	};
	return FALSE;
};

func void ironhacken_s1()
{
	if(Hlp_GetInstanceID(self) == Hlp_GetInstanceID(hero))
	{
		self.aivar[AIV_INVINCIBLE] = TRUE;
		PLAYER_MOBSI_PRODUCTION = MOBSI_IRONHACKEN;
		AI_ProcessInfos(hero);
	};
};


instance PC_IRONHACKEN_END(C_Info)
{
	npc = PC_Hero;
	nr = 999;
	condition = pc_ironhacken_end_condition;
	information = pc_ironhacken_end_info;
	permanent = TRUE;
	description = Dialog_Ende;
};


func int pc_ironhacken_end_condition()
{
	if(PLAYER_MOBSI_PRODUCTION == MOBSI_IRONHACKEN)
	{
		return TRUE;
	};
};

func void pc_ironhacken_end_info()
{
	Truemmer_Count = 0;
	b_endproductiondialog();
};


instance PC_IRONHACKEN_ADDON_HOUR(C_Info)
{
	npc = PC_Hero;
	nr = 2;
	condition = pc_ironhacken_addon_hour_condition;
	information = pc_ironhacken_addon_hour_info;
	permanent = TRUE;
	description = "Mine iron ore.";
};


func int pc_ironhacken_addon_hour_condition()
{
	if(PLAYER_MOBSI_PRODUCTION == MOBSI_IRONHACKEN)
	{
		return TRUE;
	};
};

func void pc_ironhacken_addon_hour_info()
{
	if(b_ironmob_bestimmung() == TRUE)
	{
		if((PLAYER_TALENT_OREMASTER[0] == FALSE) && (PLAYER_TALENT_OREMASTER[1] == FALSE) && (PLAYER_TALENT_OREMASTER[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,2);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("2 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((PLAYER_TALENT_OREMASTER[0] == TRUE) && (PLAYER_TALENT_OREMASTER[1] == FALSE) && (PLAYER_TALENT_OREMASTER[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,4);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("4 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((PLAYER_TALENT_OREMASTER[1] == TRUE) && (PLAYER_TALENT_OREMASTER[0] == TRUE) && (PLAYER_TALENT_OREMASTER[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,6);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("6 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((PLAYER_TALENT_OREMASTER[2] == TRUE) && (PLAYER_TALENT_OREMASTER[0] == TRUE) && (PLAYER_TALENT_OREMASTER[1] == TRUE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,8);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("8 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		};
	}
	else if((Npc_GetDistToWP(hero,"NW_CITY_ISLANDADD_07") <= 700) || (Npc_GetDistToWP(hero,"NW_CITY_SMFOREST_ADD_03") <= 1000) || (Npc_GetDistToWP(hero,"NW_BIGFARM_LAKE_CAVE_03") <= 1200) || (Npc_GetDistToWP(hero,"NW_TROLLAREA_RUINS_CAVE_01") <= 1800) || (Npc_GetDistToWP(hero,"SPAWN_MOLERAT02_SPAWN01") <= 1500))
	{
		AI_PrintScreen("Someone has already been here!",-1,52,FONT_SCREENBRIGHTLARGE,2);
		b_endproductiondialog();
	}
	else
	{
		PrintScreen("There's nothing else to be had here!",-1,-1,FONT_SCREENBRIGHTLARGE,2);
		b_endproductiondialog();
	};
};

